---
id: ccip-read
title: CCIP Read - Secure offchain data retrieval
sidebar_label: CCIP Read - Secure offchain data retrieval
slug: /core-concepts/ccip-read
---
import { RiveAnimations } from '../../src/components/RiveAnimations'

# CCIP-Read: Secure Off-Chain Data Retrieval

EIP-3668, commonly known as CCIP Read (Cross-Chain Interoperability Protocol Read), is a proposed protocol aimed at providing secure off-chain data retrieval.CCIP Read introduces a standard set of rules and protocols to create a trusted environment for off-chain data reading, delivering a solution for the data interoperability issues that plague blockchain environments.

## How CCIP Works - Specifics and Implementation

<RiveAnimations imageId="118884/5-EcI6a3RUeTRPbGne9DRA" />

The process of responding to a query via CCIP read is a three-step procedure:

1. **Querying the contract:** You initiate the process by making a typical blockchain call operation to the contract. If the contract requires off-chain data, it will fail with an error that asserts that the data for the call can be found off-chain and provides a URL to a service (gateway) that can provide the necessary information. Additionally, it passes on any extra contextual information that might be needed for the further steps.

2. **Querying the gateway:** The client then makes a call to the gateway service using the `callData` from the revert message from step 1. The gateway responds with an answer which is opaque to the client – that is, its content, by design, is not beneficial to the client.

3. **Making transaction to contract:** In this final step, the client makes a call to the original contract, supplying the response from step 2 and the `extraData` returned in step 1. The contract decodes the information, validates the response and takes action – either returning information to the client or making changes in a transaction.

The contract interface for a CCIP read enabled contract has to adhere to some specifics. It has to fail with a specific error (`OffchainLookup(address sender, string[] urls, bytes callData, bytes4 callbackFunction, bytes extraData)`) every time a function that requires off-chain data is called.

The `OffchainLookup` error returns various data, such as the contract sender, URL templates to services (gateways) implementing the CCIP read protocol, data to call the gateway with (`callData`), the function selector (`callbackFunction`) for a function on the contract where a callback will be sent, and `extraData` which MUST be retained and provided unmodified to the callback function.

The implementation will also involve a callback function on the original contract for decoding and validating the data returned by the gateway. If the chain of calls and callbacks is successfully implemented, the return data from the last call will be returned to the client as if it was returned by the function that was originally invoked.

## What CCIP Offers

CCIP offers several compelling benefits when implemented with off-chain data storage, including:

**Data Versatility**: CCIP allows any smart contract, regardless of where it is situated, to access and process off-chain stored data. This flexibility provides developers the opportunity to design complex operations without being restricted by on-chain data limitations.

**Data Reliability**: CCIP ensures that every transaction is executed accurately. It allows for a complete trail of operations, facilitating audit and troubleshooting operations. Consequently, it provides high data reliability, enriching the user experience and trust.

**Efficiency Boost**: By enabling smart contracts to directly communicate and execute operations with off-chain databases, CCIP eliminates the need for intermediaries and extra on-chain operations. This results in a more streamlined and efficient transaction process.

**Secure Execution**: CCIP ensures a secure, trustless execution of contract functions and transaction validations, without the fear of comprising the data stored off-chain. The use of off-chain data does not dilute the safety aspects of blockchain, making it a robust environment.

In summary, ERC-3668 or CCIP Read, is a pivotal component for decentralised applications' future. By establishing a communication pipeline with off-chain data storage, it offers pliability to process large volumes of data without congesting the blockchain. It enhances the efficiency, cost-effectiveness, and scalability of blockchain applications - moving a step closer towards realizing a rich, flexible and interconnected blockchain ecosystem.